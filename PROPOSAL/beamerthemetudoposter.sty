\ProvidesPackage{beamerthementudoposter}

%% packages %%
\RequirePackage{xcolor}
\RequirePackage{tcolorbox}
\RequirePackage{ifluatex}
\RequirePackage{ifxetex}

% general font settings
\usefonttheme{professionalfonts}
\usefonttheme{serif}
\ifluatex%
  \RequirePackage{fontspec}
  \setromanfont{Linux Libertine O}
  \setsansfont{Linux Biolinum O}
\else
  \ifxetex
    \RequirePackage{fontspec}
    \setromanfont{Linux Libertine O}
    \setsansfont{Linux Biolinum O}
  \else
    \RequirePackage{libertine}
  \fi
\fi

%% add numbers to figures and tables
\setbeamertemplate{caption}[numbered]

%% color definitions %%
\definecolor{tugreen}{RGB}{132, 186, 26}
\colorlet{tudark}{tugreen!70!black}
\colorlet{tulight}{tugreen!10!white}
\colorlet{tuYellow}{yellow!70!red}
\colorlet{tuRed}{red!80!black}

\definecolor{light-gray}{gray}{0.95} %the shade of grey that stack exchange uses

%% modify the lists
\RequirePackage{enumitem}
\setlist[itemize]{font=\color{tugreen}\bfseries, label=\textbullet}
\setlist[enumerate]{font=\color{tugreen}\bfseries, label=\arabic*.}
\setlist[description]{font=\color{tugreen}\bfseries}

%% bibliography settings
\setbeamertemplate{bibliography item}[text]

\setbeamercolor{bibliography entry author}{fg=black}
\setbeamercolor{bibliography entry title}{fg=black}
\setbeamercolor{bibliography entry location}{fg=black}
\setbeamercolor{bibliography entry note}{fg=black}
\setbeamercolor{bibliography item}{fg=tudark}

\setbeamerfont{bibliography item}{size=\footnotesize}
\setbeamerfont{bibliography entry author}{size=\footnotesize}
\setbeamerfont{bibliography entry title}{size=\footnotesize}
\setbeamerfont{bibliography entry location}{size=\footnotesize}
\setbeamerfont{bibliography entry note}{size=\footnotesize}


% replace beamer blocks with tcolorboxes
\newtcolorbox{myblock}[2][1]{
  leftright skip=5mm,
  before skip=10mm,
  after skip=10mm,
  boxrule=5pt,
  sharp corners,
  fonttitle=\usebeamerfont{block title},
  fontupper=\usebeamerfont{block body},
  fontlower=\usebeamerfont{block body},
  boxsep=5mm,
  adjusted title={#2},
  #1,
}

\renewenvironment{block}[2][]{%
  \usebeamercolor{block body}%
  \usebeamercolor{block title}%
  \tcbset{%
    colback=block body.bg,
    colframe=block title.bg,
    coltext=block body.fg,
    colbacktitle=block title.bg,
    coltitle=block title.fg,
  }%
  \begin{myblock}[#1]{#2}
}{%
  \par
  \end{myblock}
}
\renewenvironment{alertblock}[2][]{%
  \usebeamercolor{block body alerted}
  \usebeamercolor{block title alerted}
  \tcbset{%
    colback=block body alerted.bg,
    colframe=block title alerted.bg,
    coltext=block body.fg,
    colbacktitle=block title alerted.bg,
    coltitle=block title alerted.fg ,
  }%
  \begin{myblock}[#1]{#2}
}{%
  \par
  \end{myblock}
}
\renewenvironment{exampleblock}[2][]{%
  \usebeamercolor{block body example}
  \usebeamercolor{block title example}
  \tcbset{%
    colback=block body example.bg,
    colframe=block title example.bg,
    coltext=block body.fg,
    colbacktitle=block title example.bg,
    coltitle=block title example.fg ,
  }%
  \begin{myblock}[#1]{#2}
}{%
  \end{myblock}
}

\setbeamertemplate{navigation symbols}{}

\setbeamertemplate{headline}{
  \begin{beamercolorbox}[ht=2cm, wd=\paperwidth]{headline}%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=\paperwidth]{headline}%
    \hspace*{6cm}%
    \begin{minipage}{0.7\paperwidth-2cm}%
      \begin{beamercolorbox}[wd=\linewidth, center]{title}%
        \usebeamercolor{title}\usebeamerfont{title}\inserttitle\par%
      \end{beamercolorbox}%
      \vspace*{1cm}
      \begin{beamercolorbox}[wd=\linewidth, center]{author}%
        \usebeamercolor{author}\usebeamerfont{author}\insertauthor\par%
      \end{beamercolorbox}%
    \vspace*{1cm}
    \begin{beamercolorbox}[wd=\linewidth, center]{institute}%
      \usebeamercolor{institute}\usebeamerfont{institute}\insertinstitute\par%
    \end{beamercolorbox}%
    \end{minipage}%
    \hspace*{1cm}%
    \begin{minipage}{0.2\paperwidth-2cm}%
      \begin{beamercolorbox}[wd=\linewidth, center]{institute}%
        \usebeamercolor{institute}\usebeamerfont{institute}\inserttitlegraphic\par%
      \vspace*{1cm}%
      \end{beamercolorbox}%
    \end{minipage}%
  \end{beamercolorbox}%
  \vspace*{0.5cm}
}


\setbeamertemplate{footline}{\vspace*{1cm}}

%% fonts %%

\setbeamerfont{normal text}{size=\normalsize, family=\rmfamily}

\setbeamerfont{title}{size=\Huge, family=\sffamily, series=\bfseries}
\setbeamerfont{author}{size=\LARGE, family=\rmfamily}
\setbeamerfont{date}{size=\LARGE, family=\rmfamily}
\setbeamerfont{institute}{size=\large}

\setbeamerfont{block title}{size=\LARGE, family=\sffamily, series=\bfseries}

\setbeamerfont{caption name}{size=\normalsize, family=\sffamily, series=\bfseries}
\setbeamerfont{caption}{size=\normalsize}

%% colors %%

\setbeamercolor*{background canvas}{bg=tulight}

\setbeamercolor*{headline}{fg=tugreen, bg=white}
\setbeamercolor*{footline}{fg=tugreen, bg=white}

\setbeamercolor*{author}{fg=black, bg=white}
\setbeamercolor*{title}{fg=black, bg=white}
\setbeamercolor*{institute}{fg=black, bg=white}

\setbeamercolor*{item}{fg=tugreen, bg=black}

\setbeamercolor*{block title}{fg=white, bg=tugreen}
\setbeamercolor*{block body}{fg=black, bg=white}

\setbeamercolor*{block title alerted}{fg=white, bg=gray}
\setbeamercolor*{block body alerted}{fg=black, bg=white}

\setbeamercolor*{block title example}{fg=white, bg=tuYellow}
\setbeamercolor*{block body example}{fg=black, bg=white}

\setbeamercolor*{caption name}{fg=tudark}
\setbeamercolor*{caption}{fg=black}
